library(haven)
library(tidyverse)
library(margins)
library(magrittr)
library(ggeffects)
library(lme4)
library(splines)
library(stargazer)
library(dplyr)
library(tidytext)
library(strex)
library(tm)
#Import the dataset. Filter for variables that we need in the end as well as rename the variables to facilitate subsequent coding.
hudoc <- read.csv("hudoc.csv")
head(hudoc)
str(hudoc)
?concdate
hudoc <- read.csv("hudoc.csv")
head(hudoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)%>% select(-3, -4)
str(hudoc)
?gsub
hudoc$case <- gsub("v. |c. ", "vs.", hudoc$case)
hudoc$country <- gsub(".*vs.", "", hudoc$case)
hudoc$country <- word(hudoc$country, 1)
table(hudoc$country)
hudoc$country <- gsub("slovaquie", "slovakia", hudoc$country)
hudoc$country <- gsub("suisse", "switzerland", hudoc$country)
?sapply
table(hudoc$country)
hudoc$country <- gsub("slovaquie", "slovakia", hudoc$country)
hudoc$country <- gsub("suisse", "switzerland", hudoc$country)
table(hudoc$country)
?word
View(hudoc)
?strex
library(haven)
library(tidyverse)
library(margins)
library(magrittr)
library(ggeffects)
library(lme4)
library(splines)
library(stargazer)
library(dplyr)
library(tidytext)
library(strex)
library(tm)
## Data Preparation
#Import the dataset. Filter for variables that we need in the end as well as rename the variables to facilitate subsequent coding.
hudoc <- read.csv("hudoc.csv")
head(hudoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)%>% select(-3, -4)
#Recode and create variables
#convert everything to lower case to facilitate recoding
hudoc$conclusion <- sapply(hudoc$conclusion, tolower)
hudoc$case <- sapply(hudoc$case, tolower)
#create country variable
hudoc$case <- gsub("v. |c. ", "vs.", hudoc$case)
hudoc$country <- gsub(".*vs.", "", hudoc$case)
hudoc$country <- word(hudoc$country, 1)
table(hudoc$country)
hudoc$country <- gsub("slovaquie", "slovakia", hudoc$country)
hudoc$country <- gsub("suisse", "switzerland", hudoc$country)
#create violation variable (first filter for the text and number of article separately, then merge together. Afterwards remove junk/summarize)
hudoc$text <- str_extract(hudoc$conclusion, "^\\D+")
hudoc$article <- str_first_number(hudoc$conclusion)
removeSpecialChars <- function(x) gsub("[^a-zA-Z0-9 ]", " ", x)
hudoc$text <- sapply(hudoc$text, removeSpecialChars)
# #junk
# hudoc$text <- gsub("  |   ", " ", hudoc$text)
# hudoc$text <- gsub(" de l |of ", " ", hudoc$text)
# hudoc$text <- gsub("article |art ", " ", hudoc$text)
# hudoc$text <- gsub("non ", "no ", hudoc$text)
# hudoc$text <- gsub("preliminary objection joined to merits and dismissed victim remainder inadmissible violation of |preliminary objection joined to merits and dismissed victim violation of |preliminary objection joined to merits and dismissed ","preliminary objection joined to merits and dismissed ", hudoc$text)
# hudoc$text <- gsub("exception pr liminaire rejet e |exceptions pr liminaires rejet es |preliminary objection dismissed ", "preliminary objections dismissed ", hudoc$text)
# hudoc$text <- gsub("partiellement irrecevable ", "partially irrecevable ", hudoc$text)
# hudoc$text <- gsub("remainder inadmissible violation  |remainder inadmissible struck out the list  ", "remainder inadmissible  ", hudoc$text)
# hudoc$text <- gsub("preliminary objection joined to merits and dismissed victim remainder inadmissible |preliminary objection joined to merits and dismissed victim violation ", "preliminary objection joined to merits and dismissed ", hudoc$text)
# hudoc$text <- gsub("partially irrecevable violation", "partially irrecevable ", hudoc$text)
#merge text and article no.
hudoc$violation_art <- paste(hudoc$text, hudoc$article, sep = "art ")
#create categorical variable
hudoc$catvar <- as.character(as.numeric(as.factor(hudoc$text)))
table(hudoc$catvar)
hudoc$catvar <- as.factor(ifelse(hudoc$catvar == 9, 1, 0))
#create dummy variable
hudoc$dummy <- as.character(as.numeric(as.factor(hudoc$text)))
hudoc$dummy <- car::recode(hudoc$dummy, "1= '0'; 9 = '1'; else = NA")
## Including Plots
str(hudoc)
glimse(hudoc)
glimpse(hudoc)
hudoc <- read.csv("hudoc.csv")
head(hudoc)
glimpse(hudoc)
?select
udoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)
View(udoc)
conclusion = Conclusion)
rm(udoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)
glimpse(hudoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)
hudoc <- read.csv("hudoc.csv")
head(hudoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)
glimpse(hudoc)
subsequent coding.
hudoc <- read.csv("hudoc.csv")
head(hudoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)%>% select(-3, -4)
glimpse(hudoc)
hudoc <- read.csv("hudoc.csv")
hudoc <- read.csv("hudoc.csv")
glimpse(hudoc)
hudoc <- read.csv("hudoc.csv")
glimpse(hudoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)
glimpse(hudoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)%>% select(-3, -4)
hudoc <- read.csv("hudoc.csv")
head(hudoc)
hudoc <- hudoc %>% rename(case = Document.Title  ,case_id = Application.Number,
concdate = Date,
conclusion = Conclusion)%>% select(-3, -4)
glimpse(hudoc)
?tolower
#convert everything to lower case to facilitate recoding
hudoc$conclusion <- sapply(hudoc$conclusion, tolower)
hudoc$case <- sapply(hudoc$case, tolower)
#create country variable
hudoc$case <- gsub("v. |c. ", "vs.", hudoc$case)
hudoc$country <- gsub(".*vs.", "", hudoc$case)
hudoc$country <- word(hudoc$country, 1)
table(hudoc$country)
hudoc$conclusion <- sapply(hudoc$conclusion, tolower)
hudoc$case <- sapply(hudoc$case, tolower)
#create country variable
hudoc$case <- gsub("v. |c. ", "vs.", hudoc$case)
hudoc$country <- gsub(".*vs.", "", hudoc$case)
hudoc$country <- word(hudoc$country, 1)
table(hudoc$country)
hudoc$country <- gsub("slovaquie", "slovakia", hudoc$country)
hudoc$country <- gsub("suisse", "switzerland", hudoc$country)
levels(hudoc$country)
class(hudoc$country)
table(hudoc$country)
hudoc$text <- str_extract(hudoc$conclusion, "^\\D+")
hudoc$text
hudoc$conclusion
hudoc$text
hudoc$article <- str_first_number(hudoc$conclusion)
hudoc$article
summary(hudoc$article)
str(hudoc$article)
removeSpecialChars <- function(x) gsub("[^a-zA-Z0-9 ]", " ", x)
hudoc$text <- sapply(hudoc$text, removeSpecialChars)
hudoc$violation_art <- paste(hudoc$text, hudoc$article, sep = "art ")
hudoc$violation_art
#create categorical variable
hudoc$catvar <- as.character(as.numeric(as.factor(hudoc$text)))
table(hudoc$catvar)
hudoc$catvar <- as.factor(ifelse(hudoc$catvar == 9, 1, 0))
#create dummy variable
hudoc$dummy <- as.character(as.numeric(as.factor(hudoc$text)))
hudoc$dummy <- car::recode(hudoc$dummy, "1= '0'; 9 = '1'; else = NA")
hudoc$dummy
table(hudoc$catvar)
hudoc$violation_art
hudoc$text
hudoc$conclusion
hudoc$conclusion[238]
hudoc$article[238]
hudoc$text[238]
library(stringr)
str_extract_all()
?str_extract_all
testv <- c("a__b_a", "a", "b", "aa_bbbb_a_aa")
str_extract_all(testv, "a")
str_extract_all(testv, "a", simplify = TRUE)
